<script src="https://unpkg.com/vue@3"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<div id="app">
  <h1>OF Task Extractor</h1>
  <form @submit.prevent="onSubmit">
    <div>
      <label for="project">Project</label>
      <input v-model="project" id="project" />
    </div>
    <div>
      <label for="task">Task</label>
      <input v-model="task" id="task" />
    </div>
    <button type="submit">Enviar</button>
  </form>

  <h2>Commits</h2>
  <ul>
    <li v-for="commit in response.commits">{{ commit }}</li>
  </ul>

  <h2>Files</h2>
  <ul>
    <li v-for="commit in response.files">{{ commit }}</li>
  </ul>
</div>

<script>
  const { createApp } = Vue;

  createApp({
    data() {
      return {
        project: "/kdi_nia/git/nia-triton-manager",
        task: "570346",
        response: {
          files: [],
          commits: [],
        },
      };
    },
    methods: {
      onSubmit() {
        const payload = {
          project: this.project,
          task: this.task,
        };
        axios.post("/api", payload).then((response) => {
          this.response = response.data;
        });
      },
    },
  }).mount("#app");
</script>
